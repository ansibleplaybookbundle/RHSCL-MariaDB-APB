FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBteXNx\
bF9kYXRhYmFzZQogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3Jp\
cHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICB0aXRsZTogTWFyaWFEQiBE\
YXRhYmFzZSBuYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNz\
d29yZAogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRpb246\
IEEgcmFuZG9tIGFscGhhbnVtZXJpYyBzdHJpbmcgaWYgbGVmdCBibGFuawogIC0gbmFtZTogbXlz\
cWxfdXNlcgogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRp\
b246IE1hcmlhREIgVXNlcgogICAgcmVxdWlyZWQ6IHRydWUKICAtIG5hbWU6IG15c3FsX3Bhc3N3\
b3JkCiAgICBkZWZhdWx0OiBhZG1pbgogICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjog\
QSByYW5kb20gYWxwaGFudW1lcmljIHN0cmluZyBpZiBsZWZ0IGJsYW5rCiAgICByZXF1aXJlZDog\
ZmFsc2UKICAtIG5hbWU6IG1hcmlhZGJfdmVyc2lvbgogICAgZGVmYXVsdDogIjEwLjAiCiAgICBl\
bnVtOiBbJzEwLjAnLCAnMTAuMSddCiAgICB0eXBlOiBlbnVtCiAgICB0aXRsZTogTWFyaWFEQiBW\
ZXJzaW9uCiAgICByZXF1aXJlZDogdHJ1ZQoKdmVyc2lvbjogMS4wCm5hbWU6IHJoc2NsLW1hcmlh\
ZGItYXBiCmltYWdlOiBhbnNpYmxlcGxheWJvb2tidW5kbGUvcmhzY2wtbWFyaWFkYi1hcGIKZGVz\
Y3JpcHRpb246IE1hcmlhZGIgYXBiIGltcGxlbWVudGF0aW9uCmJpbmRhYmxlOiB0cnVlCmFzeW5j\
OiBvcHRpb25hbAptZXRhZGF0YToKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9tYXJpYWRi\
LmNvbS9rYi9lbi9tYXJpYWRiL2RvY3VtZW50YXRpb24vIgogIGxvbmdEZXNjcmlwdGlvbjogIkRl\
cGxveXMgYSBiaW5kYWJsZSBtYXJpYWRiIGluc3RhbmNlIgogIGRlcGVuZGVuY2llczogWydyZWdp\
c3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEwLXJoZWw3J10KICBkaXNwbGF5\
TmFtZTogIlJIU0NMIE1hcmlhREIgKEFQQikiCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNs\
YXNzOiBpY29uLW1hcmlhZGIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIK\
cGxhbnM6CiAgLSBuYW1lOiBkZXYKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBh\
IHNpbmdsZSBNYXJpYURCIGluc3RhbmNlIHdpdGggZXBoZW1lcmFsIHN0b3JhZ2UKICAgIGZyZWU6\
IHRydWUKICAgIGRlZmF1bHQ6IHRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTog\
RGV2ZWxvcG1lbnQKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6ICpfcGFyYW1zCiAg\
LSBuYW1lOiBwcm9kCiAgICBkZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBzaW5nbGUg\
TWFyaWFEQiBpbnN0YW5jZSB3aXRoIDEwIEdpQiBvZiBwZXJzaXN0ZW50IHN0b3JhZ2UKICAgIGZy\
ZWU6IHRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogUHJvZHVjdGlvbgogICAg\
ICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogKl9wYXJhbXMKcmVxdWlyZWQ6CiAgLSBtYXJp\
YWRiX3ZlcnNpb24KICAtIG15c3FsX2RhdGFiYXNlCiAgLSBteXNxbF91c2VyCgo="

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
