FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBteXNx\
bF9kYXRhYmFzZQogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3Jp\
cHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICB0aXRsZTogTWFyaWFEQiBE\
YXRhYmFzZSBuYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNz\
d29yZAogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRpb246\
IEEgcmFuZG9tIGFscGhhbnVtZXJpYyBzdHJpbmcgaWYgbGVmdCBibGFuawogIC0gbmFtZTogbXlz\
cWxfdXNlcgogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRp\
b246IE1hcmlhREIgVXNlcgogICAgcmVxdWlyZWQ6IHRydWUKICAtIG5hbWU6IG15c3FsX3Bhc3N3\
b3JkCiAgICBkZWZhdWx0OiBhZG1pbgogICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjog\
QSByYW5kb20gYWxwaGFudW1lcmljIHN0cmluZyBpZiBsZWZ0IGJsYW5rCiAgICByZXF1aXJlZDog\
ZmFsc2UKICAtIG5hbWU6IG1hcmlhZGJfdmVyc2lvbgogICAgZGVmYXVsdDogIjEwLjAiCiAgICBl\
bnVtOiBbJzEwLjAnLCAnMTAuMSddCiAgICB0eXBlOiBlbnVtCiAgICB0aXRsZTogTWFyaWFEQiBW\
ZXJzaW9uCiAgICByZXF1aXJlZDogdHJ1ZQoKdmVyc2lvbjogMS4wCm5hbWU6IHJoc2NsLW1hcmlh\
ZGItYXBiCmRlc2NyaXB0aW9uOiBNYXJpYWRiIGFwYiBpbXBsZW1lbnRhdGlvbgpiaW5kYWJsZTog\
dHJ1ZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBz\
Oi8vbWFyaWFkYi5jb20va2IvZW4vbWFyaWFkYi9kb2N1bWVudGF0aW9uLyIKICBsb25nRGVzY3Jp\
cHRpb246ICJEZXBsb3lzIGEgYmluZGFibGUgbWFyaWFkYiBpbnN0YW5jZSIKICBkZXBlbmRlbmNp\
ZXM6CiAgICAtICdyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEwMC1y\
aGVsNycKICAgIC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5yZWRoYXQuY29tL3Joc2NsL21hcmlhZGItMTAx\
LXJoZWw3JwogIGRpc3BsYXlOYW1lOiAiUkhTQ0wgTWFyaWFEQiAoQVBCKSIKICBjb25zb2xlLm9w\
ZW5zaGlmdC5pby9pY29uQ2xhc3M6IGljb24tbWFyaWFkYgogIHByb3ZpZGVyRGlzcGxheU5hbWU6\
ICJSZWQgSGF0LCBJbmMuIgpwbGFuczoKICAtIG5hbWU6IGRldgogICAgZGVzY3JpcHRpb246IFRo\
aXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIE1hcmlhREIgaW5zdGFuY2Ugd2l0aCBlcGhlbWVyYWwg\
c3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAgZGVmYXVsdDogdHJ1ZQogICAgbWV0YWRhdGE6CiAg\
ICAgIGRpc3BsYXlOYW1lOiBEZXZlbG9wbWVudAogICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1l\
dGVyczogKl9wYXJhbXMKICAtIG5hbWU6IHByb2QKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4g\
ZGVwbG95cyBhIHNpbmdsZSBNYXJpYURCIGluc3RhbmNlIHdpdGggMTAgR2lCIG9mIHBlcnNpc3Rl\
bnQgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1l\
OiBQcm9kdWN0aW9uCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAqX3BhcmFtcwpy\
ZXF1aXJlZDoKICAtIG1hcmlhZGJfdmVyc2lvbgogIC0gbXlzcWxfZGF0YWJhc2UKICAtIG15c3Fs\
X3VzZXIKCg=="


COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
