FROM ansibleplaybookbundle/apb-base:canary
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBteXNx\
bF9kYXRhYmFzZQogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3Jp\
cHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICB0aXRsZTogTWFyaWFEQiBE\
YXRhYmFzZSBuYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNz\
d29yZAogICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjogQSByYW5kb20gYWxwaGFudW1l\
cmljIHN0cmluZyBpZiBsZWZ0IGJsYW5rCiAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICBy\
ZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfdXNlcgogICAgZGVmYXVsdDogYWRtaW4KICAg\
IHR5cGU6IHN0cmluZwogICAgcmVxdWlyZWQ6IHRydWUKICAgIGRlc2NyaXB0aW9uOiBNYXJpYURC\
IFVzZXIKICAtIG5hbWU6IG15c3FsX3Bhc3N3b3JkCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlc2Ny\
aXB0aW9uOiBBIHJhbmRvbSBhbHBoYW51bWVyaWMgc3RyaW5nIGlmIGxlZnQgYmxhbmsKICAgIHJl\
cXVpcmVkOiB0cnVlCiAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgLSBuYW1lOiBtYXJpYWRi\
X3ZlcnNpb24KICAgIGRlZmF1bHQ6ICIxMC4yIgogICAgZW51bTogWycxMC4yJyAsICcxMC4xJywg\
JzEwLjAnXQogICAgdHlwZTogZW51bQogICAgdGl0bGU6IE1hcmlhREIgVmVyc2lvbgogICAgcmVx\
dWlyZWQ6IHRydWUKICAgIHVwZGF0YWJsZTogdHJ1ZQoKdmVyc2lvbjogMS4wCm5hbWU6IG1hcmlh\
ZGItYXBiCmRlc2NyaXB0aW9uOiBNYXJpYWRiIGFwYiBpbXBsZW1lbnRhdGlvbgpiaW5kYWJsZTog\
dHJ1ZQphc3luYzogb3B0aW9uYWwKdGFnczoKICAtIGRhdGFiYXNlCiAgLSBtYXJpYWRiCm1ldGFk\
YXRhOgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwczovL21hcmlhZGIuY29tL2tiL2VuL21hcmlh\
ZGIvZG9jdW1lbnRhdGlvbi8iCiAgbG9uZ0Rlc2NyaXB0aW9uOiAiRGVwbG95cyBhIGJpbmRhYmxl\
IG1hcmlhZGIgaW5zdGFuY2UiCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNz\
LnJlZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDAtcmhlbDcnCiAgICAtICdyZWdpc3RyeS5hY2Nl\
c3MucmVkaGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEwMS1yaGVsNycKICAgIC0gJ3JlZ2lzdHJ5LmFj\
Y2Vzcy5yZWRoYXQuY29tL3Joc2NsL21hcmlhZGItMTAyLXJoZWw3JwogIGRpc3BsYXlOYW1lOiAi\
TWFyaWFEQiAoQVBCKSIKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29uQ2xhc3M6IGljb24tbWFy\
aWFkYgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgpwbGFuczoKICAtIG5h\
bWU6IGRldgogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIE1hcmlh\
REIgaW5zdGFuY2Ugd2l0aCBlcGhlbWVyYWwgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAgZGVm\
YXVsdDogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBEZXZlbG9wbWVudAog\
ICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogKl9wYXJhbXMKICAgIHVwZGF0ZXNfdG86\
CiAgICAgIC0gcHJvZAogIC0gbmFtZTogcHJvZAogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBk\
ZXBsb3lzIGEgc2luZ2xlIE1hcmlhREIgaW5zdGFuY2Ugd2l0aCAxMCBHaUIgb2YgcGVyc2lzdGVu\
dCBzdG9yYWdlCiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6\
IFByb2R1Y3Rpb24KICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6ICpfcGFyYW1zCiAg\
ICB1cGRhdGVzX3RvOgogICAgICAtIGRldgo="



COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
