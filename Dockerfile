FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.version"="1.0"
LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBteXNx\
bF9kYXRhYmFzZQogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3Jp\
cHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICB0aXRsZTogTWFyaWFEQiBE\
YXRhYmFzZSBuYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNz\
d29yZAogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRpb246\
IEEgcmFuZG9tIGFscGhhbnVtZXJpYyBzdHJpbmcgaWYgbGVmdCBibGFuawogIC0gbmFtZTogbXlz\
cWxfdXNlcgogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRp\
b246IE1hcmlhREIgVXNlcgogICAgcmVxdWlyZWQ6IHRydWUKICAtIG5hbWU6IG15c3FsX3Bhc3N3\
b3JkCiAgICBkZWZhdWx0OiBhZG1pbgogICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjog\
QSByYW5kb20gYWxwaGFudW1lcmljIHN0cmluZyBpZiBsZWZ0IGJsYW5rCiAgICByZXF1aXJlZDog\
ZmFsc2UKICAtIG5hbWU6IG1hcmlhZGJfdmVyc2lvbgogICAgZGVmYXVsdDogIjEwLjAiCiAgICBl\
bnVtOiBbJzEwLjAnLCAnMTAuMSddCiAgICB0eXBlOiBlbnVtCiAgICB0aXRsZTogTWFyaWFEQiBW\
ZXJzaW9uCiAgICByZXF1aXJlZDogdHJ1ZQoKbmFtZTogcmhzY2wtbWFyaWFkYi1hcGIKaW1hZ2U6\
IGFuc2libGVwbGF5Ym9va2J1bmRsZS9yaHNjbC1tYXJpYWRiLWFwYgpkZXNjcmlwdGlvbjogTWFy\
aWFkYiBhcGIgaW1wbGVtZW50YXRpb24KYmluZGFibGU6IHRydWUKYXN5bmM6IG9wdGlvbmFsCm1l\
dGFkYXRhOgogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwczovL21hcmlhZGIuY29tL2tiL2VuL21h\
cmlhZGIvZG9jdW1lbnRhdGlvbi8iCiAgbG9uZ0Rlc2NyaXB0aW9uOiAiRGVwbG95cyBhIGJpbmRh\
YmxlIG1hcmlhZGIgaW5zdGFuY2UiCiAgZGVwZW5kZW5jaWVzOiBbJ3JlZ2lzdHJ5LmFjY2Vzcy5y\
ZWRoYXQuY29tL3Joc2NsL21hcmlhZGItMTAtcmhlbDcnXQogIGRpc3BsYXlOYW1lOiAiUkhTQ0wg\
TWFyaWFEQiAoQVBCKSIKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29uQ2xhc3M6IGljb24tbWFy\
aWFkYgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgpwbGFuczoKICAtIG5h\
bWU6IGRldgogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIE1hcmlh\
REIgaW5zdGFuY2Ugd2l0aCBlcGhlbWVyYWwgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAgZGVm\
YXVsdDogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBEZXZlbG9wbWVudAog\
ICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogKl9wYXJhbXMKICAtIG5hbWU6IHByb2QK\
ICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIHNpbmdsZSBNYXJpYURCIGluc3Rh\
bmNlIHdpdGggMTAgR2lCIG9mIHBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAg\
bWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBQcm9kdWN0aW9uCiAgICAgIGNvc3Q6ICQwLjAw\
CiAgICBwYXJhbWV0ZXJzOiAqX3BhcmFtcwpyZXF1aXJlZDoKICAtIG1hcmlhZGJfdmVyc2lvbgog\
IC0gbXlzcWxfZGF0YWJhc2UKICAtIG15c3FsX3VzZXIKCg=="

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
